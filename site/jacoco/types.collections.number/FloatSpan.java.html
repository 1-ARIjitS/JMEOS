<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FloatSpan.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">jmeos</a> &gt; <a href="index.source.html" class="el_package">types.collections.number</a> &gt; <span class="el_source">FloatSpan.java</span></div><h1>FloatSpan.java</h1><pre class="source lang-java linenums">package types.collections.number;
import jnr.ffi.Pointer;
import types.collections.base.Base;
import types.collections.base.Span;
import functions.functions;

/**
 * Class for representing sets of contiguous float values between a lower and
 *     an upper bound. The bounds may be inclusive or not.
 * &lt;p&gt;
 *     ``FloatSpan`` objects can be created with a single argument of type string
 *     as in MobilityDB.
 * &lt;p&gt;
 *         &gt;&gt;&gt; FloatSpan('(2.5, 5.21]')
 * &lt;p&gt;
 *     Another possibility is to provide the ``lower`` and ``upper`` named
 *     parameters (of type str or float), and optionally indicate whether the
 *     bounds are inclusive or exclusive (by default, the lower bound is inclusive
 *     and the upper is exclusive):
 * &lt;p&gt;
 *         &gt;&gt;&gt; FloatSpan(lower=2.0, upper=5.8)
 *         &gt;&gt;&gt; FloatSpan(lower=2.0, upper=5.8, lower_inc=False, upper_inc=True)
 *         &gt;&gt;&gt; FloatSpan(lower='2.0', upper='5.8', upper_inc=True)
 *
 * @author ARIJIT SAMAL
 */
public class FloatSpan extends Span&lt;Float&gt; implements Number{
    private final Pointer _inner;

    /** ------------------------- Constructors ---------------------------------- */

    public FloatSpan(Pointer inner){
<span class="fc" id="L33">        super(inner);</span>
<span class="fc" id="L34">        this._inner = inner;</span>
<span class="fc" id="L35">    }</span>

    public FloatSpan(String str){
<span class="fc" id="L38">        super(str);</span>
<span class="fc" id="L39">        this._inner = functions.floatspan_in(str);</span>
<span class="fc" id="L40">    }</span>


    public FloatSpan(float lower, float upper, boolean lower_inc, boolean upper_inc){
<span class="fc" id="L44">        super(lower,upper,lower_inc,upper_inc);</span>
<span class="fc" id="L45">        _inner = functions.floatspan_make((double) lower, (double) upper,lower_inc,upper_inc);</span>
<span class="fc" id="L46">    }</span>

    public FloatSpan(float lower, String upper, boolean lower_inc, boolean upper_inc){
<span class="fc" id="L49">        super(lower,upper,lower_inc,upper_inc);</span>
<span class="fc" id="L50">        double new_upper = Double.parseDouble(upper);</span>
<span class="fc" id="L51">        _inner = functions.floatspan_make(lower,new_upper,lower_inc,upper_inc);</span>
<span class="fc" id="L52">    }</span>

    public FloatSpan(String lower, String upper, boolean lower_inc, boolean upper_inc){
<span class="fc" id="L55">        super(lower,upper,lower_inc,upper_inc);</span>
<span class="fc" id="L56">        double new_upper = Double.parseDouble(upper);</span>
<span class="fc" id="L57">        double new_lower = Double.parseDouble(lower);</span>
<span class="fc" id="L58">        _inner = functions.floatspan_make(new_lower,new_upper,lower_inc,upper_inc);</span>
<span class="fc" id="L59">    }</span>

    public FloatSpan(String lower, float upper, boolean lower_inc, boolean upper_inc){
<span class="nc" id="L62">        super(lower,upper,lower_inc,upper_inc);</span>
<span class="nc" id="L63">        double new_lower = Double.parseDouble(lower);</span>
<span class="nc" id="L64">        _inner = functions.floatspan_make(new_lower,(double) upper,lower_inc,upper_inc);</span>
<span class="nc" id="L65">    }</span>

    public FloatSpan(float lower, float upper){
<span class="nc" id="L68">        super(lower,upper,true,false);</span>
<span class="nc" id="L69">        _inner = functions.floatspan_make((double) lower,(double) upper,true,false);</span>
<span class="nc" id="L70">    }</span>




    @Override
    public Pointer createStringInner(String str){
<span class="fc" id="L77">        return functions.floatspan_in(str);</span>
    }

    @Override
    public Pointer createInner(Pointer inner){
<span class="fc" id="L82">        return inner;</span>
    }


    @Override
    public Pointer createIntInt(java.lang.Number lower, java.lang.Number upper, boolean lower_inc, boolean upper_inc){
<span class="fc" id="L88">        return functions.floatspan_make(lower.floatValue(),upper.floatValue(),lower_inc,upper_inc);</span>
    }
    @Override
    public Pointer createIntStr(java.lang.Number lower, String upper, boolean lower_inc, boolean upper_inc){
<span class="fc" id="L92">        double new_upper = Double.parseDouble(upper);</span>
<span class="fc" id="L93">        return functions.floatspan_make(lower.floatValue(),new_upper,lower_inc,upper_inc);</span>
    }
    @Override
    public Pointer createStrStr(String lower, String upper, boolean lower_inc, boolean upper_inc){
<span class="fc" id="L97">        double new_upper = Double.parseDouble(upper);</span>
<span class="fc" id="L98">        double new_lower = Double.parseDouble(lower);</span>
<span class="fc" id="L99">        return functions.floatspan_make(new_lower,new_upper,lower_inc,upper_inc);</span>
    }
    @Override
    public Pointer createStrInt(String lower, java.lang.Number upper, boolean lower_inc, boolean upper_inc){
<span class="nc" id="L103">        int new_lower = Integer.parseInt(lower);</span>
<span class="nc" id="L104">        return functions.floatspan_make(new_lower,upper.floatValue(),lower_inc,upper_inc);</span>
    }
    @Override
    public Pointer createIntIntNb(java.lang.Number lower, java.lang.Number upper){
<span class="nc" id="L108">        return functions.floatspan_make(lower.floatValue(),upper.floatValue(),true,false);</span>
    }



    /* ------------------------- Output ---------------------------------------- */

    /**
     * Return the string representation of the content of &quot;this&quot;.
     *
     *  &lt;p&gt;
     *         MEOS Functions:
     *             &lt;li&gt;floatspan_out&lt;/li&gt;
     *
     *
     * @param max_decimals number of maximum decimals
     * @return A new {@link String} instance
     */
    public String toString(int max_decimals){
<span class="fc" id="L127">        return functions.floatspan_out(this._inner, max_decimals);</span>
    }



    /* ------------------------- Conversions ----------------------------------- */


    /**
     * Returns a SpanSet that contains a Span for each element in &quot;this&quot;.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;set_to_spanset&lt;/li&gt;
     *
     * @return A new {@link FloatSpanSet} instance
     */
    public FloatSpanSet to_spanset(){
<span class="fc" id="L146">        return new FloatSpanSet(functions.span_to_spanset(this._inner));</span>
    }


    /**
     * Converts &quot;this&quot; to a {@link IntSpan} instance.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;floatspan_intspan&lt;/li&gt;
     *
     * @return A new {@link IntSpan} instance
     */
    public IntSpan to_intspan(){
<span class="nc" id="L161">        return new IntSpan(functions.floatspan_to_intspan(this._inner));</span>
    }


    /** ------------------------- Accessors ------------------------------------- */


    @Override
    public Pointer get_inner(){
<span class="fc" id="L170">        return _inner;</span>
    }


    /**
     * Returns the lower bound of &quot;this&quot;.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;period_lower&lt;/li&gt;
     *
     * @return The lower bound of the span as a {@link Float}
     */
    public Float lower(){
<span class="fc" id="L185">        return (float) functions.floatspan_lower(this._inner);</span>
    }



    /**
     * Returns the upper bound of &quot;this&quot;.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;period_upper&lt;/li&gt;
     *
     * @return The lower bound of the span as a {@link Float}
     */
    public Float upper(){
<span class="fc" id="L201">        return (float) functions.floatspan_upper(this._inner);</span>
    }


    /**
     * Returns the width of &quot;this&quot;.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;span_width&lt;/li&gt;
     *
     * @return Returns a &quot;float&quot; representing the width of the span
     */
    public float width(){
<span class="fc" id="L216">        return (float) functions.floatspan_width(this._inner);</span>
    }



    /* ------------------------- Transformations ------------------------------- */

    /**
     * Return a new &quot;FloatSpan&quot; with the lower and upper bounds shifted by
     *         &quot;delta&quot;.
     *
     *  &lt;p&gt;
     *         MEOS Functions:
     *             &lt;li&gt;floatspan_shift_scale&lt;/li&gt;
     *
     *
     * @param delta The value to shift by
     * @return A new {@link FloatSpan} instance
     */
    public FloatSpan shift(int delta){
<span class="nc" id="L236">        return this.shift_scale(delta,0);</span>
    }



    /**
     * Return a new &quot;FloatSpan&quot; with the lower and upper bounds scaled so
     *         that the width is &quot;width&quot;.
     *
     *  &lt;p&gt;
     *         MEOS Functions:
     *             &lt;li&gt;floatspan_shift_scale&lt;/li&gt;
     *
     * @param width The new width
     * @return a new {@link FloatSpan} instance
     */

    public FloatSpan scale(int width){
<span class="nc" id="L254">        return this.shift_scale(0,width);</span>
    }


    /**
     * Return a new &quot;FloatSpan&quot; with the lower and upper bounds shifted by
     *         &quot;delta&quot; and scaled so that the width is &quot;width&quot;.
     *
     *  &lt;p&gt;
     *         MEOS Functions:
     *             &lt;li&gt;floatspan_shift_scale&lt;/li&gt;
     *
     * @param delta The value to shift by
     * @param width value to compare with
     * @return a new {@link FloatSpan} instance
     */
    public FloatSpan shift_scale(int delta, int width){
<span class="nc bnc" id="L271" title="All 4 branches missed.">        return new FloatSpan(functions.floatspan_shift_scale(this._inner,delta,width,delta != 0, width != 0));</span>
    }


    /* ------------------------- Topological Operations -------------------------------- */

    /**
     * Returns whether &quot;this&quot; is adjacent to &quot;other&quot;. That is, they share
     *         a bound but only one of them contains it.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;adjacent_span_span&lt;/li&gt;
     *             &lt;li&gt;adjacent_span_spanset&lt;/li&gt;
     *             &lt;li&gt;adjacent_floatspan_float&lt;/li&gt;
     *
     * @param other object to compare with
     * @return True if adjacent, False otherwise
     * @throws Exception
     */
    public boolean is_adjacent(Object other) throws Exception {
<span class="pc bpc" id="L293" title="2 of 4 branches missed.">        if ((other instanceof Integer) || (other instanceof Float)){</span>
<span class="fc" id="L294">            return functions.adjacent_span_float(this._inner, (float) other);</span>
        }
        else {
<span class="nc" id="L297">            return super.is_adjacent((Base) other);</span>
        }
    }


    /**
     * Returns whether &quot;this&quot; contains &quot;content&quot;.
     *
     * &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;contains_set_set&lt;/li&gt;
     *             &lt;li&gt;contains_floatspan_float&lt;/li&gt;
     *
     * @param other object to compare with
     * @return True if contains, False otherwise
     * @throws Exception
     */
    public boolean contains(Object other) throws Exception {
<span class="pc bpc" id="L316" title="2 of 4 branches missed.">        if ((other instanceof Integer) || (other instanceof Float)){</span>
<span class="fc" id="L317">            return functions.contains_span_float(this._inner, (float) other);</span>
        }
        else {
<span class="nc" id="L320">            return super.contains((Base) other);</span>
        }
    }


    /**
     * Returns whether &quot;this&quot; and the bounding period of &quot;other is the
     *         same.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;same_period_temporal&lt;/li&gt;
     *
     * @param other object to compare with
     * @return True if equal, False otherwise
     * @throws Exception
     */
    public boolean is_same(Object other) throws Exception {
<span class="pc bpc" id="L339" title="2 of 4 branches missed.">        if ((other instanceof Integer) || (other instanceof Float)){</span>
<span class="fc" id="L340">            return functions.span_eq(this._inner, functions.float_to_span((float)other));</span>
        }
        else {
<span class="nc" id="L343">            return super.is_same((Base) other);</span>
        }
    }

    /* ------------------------- Position Operations --------------------------- */


    /**
     * Returns whether &quot;this&quot; is strictly before &quot;other&quot;. That is,
     *         &quot;this&quot; ends before &quot;other&quot; starts.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             left_span_span
     *             left_span_spanset
     *             left_floatspan_float
     *
     * @param other object to compare with
     * @return True if before, False otherwise
     * @throws Exception
     */
    public boolean is_left(Object other) throws Exception {
<span class="pc bpc" id="L366" title="2 of 4 branches missed.">        if ((other instanceof Integer) || (other instanceof Float)){</span>
<span class="fc" id="L367">            return functions.left_span_float(this._inner, (float) other);</span>
        }
        else {
<span class="nc" id="L370">            return super.is_left((Base) other);</span>
        }
    }


    /**
     * Returns whether &quot;this&quot; is before &quot;other&quot; allowing overlap. That is,
     *         &quot;this ends before &quot;other&quot; ends (or at the same value).
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;overleft_span_span&lt;/li&gt;
     *             &lt;li&gt;overleft_span_spanset&lt;/li&gt;
     *             &lt;li&gt;overleft_floatspan_float&lt;/li&gt;
     *
     * @param other object to compare with
     * @return True if before, False otherwise
     * @throws Exception
     */
    public boolean is_over_or_left(Object other) throws Exception {
<span class="pc bpc" id="L391" title="2 of 4 branches missed.">        if ((other instanceof Integer) || (other instanceof Float)){</span>
<span class="fc" id="L392">            return functions.overleft_span_float(this._inner, (float) other);</span>
        }
        else {
<span class="nc" id="L395">            return super.is_over_or_left((Base) other);</span>
        }
    }

    /**
     * Returns whether &quot;this&quot; is strictly after &quot;other&quot;. That is, &quot;this&quot;
     *         starts after &quot;other&quot; ends.
     *
     *   &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;right_span_span&lt;/li&gt;
     *             &lt;li&gt;right_span_spanset&lt;/li&gt;
     *             &lt;li&gt;right_floatspan_float&lt;/li&gt;
     *
     * @param other object to compare with
     * @return True if after, False otherwise
     * @throws Exception
     */
    public boolean is_right(Object other) throws Exception {
<span class="pc bpc" id="L415" title="2 of 4 branches missed.">        if ((other instanceof Integer) || (other instanceof Float)){</span>
<span class="fc" id="L416">            return functions.right_span_float(this._inner, (float) other);</span>
        }
        else {
<span class="nc" id="L419">            return super.is_right((Base) other);</span>
        }
    }


    /**
     * Returns whether &quot;this&quot; is after &quot;other&quot; allowing overlap. That is,
     *         &quot;this&quot; starts after &quot;other&quot; starts (or at the same value).
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;overright_span_span&lt;/li&gt;
     *             &lt;li&gt;overright_span_spanset&lt;/li&gt;
     *             &lt;li&gt;overright_floatspan_float&lt;/li&gt;
     *
     * @param other object to compare with
     * @return True if overlapping or after, False otherwise
     * @throws Exception
     */
    public boolean is_over_or_right(Object other) throws Exception {
<span class="pc bpc" id="L440" title="2 of 4 branches missed.">        if ((other instanceof Integer) || (other instanceof Float)){</span>
<span class="fc" id="L441">            return functions.overright_span_float(this._inner, (float) other);</span>
        }
        else {
<span class="nc" id="L444">            return super.is_over_or_right((Base) other);</span>
        }
    }

    /* ------------------------- Distance Operations --------------------------- */


    /**
     * Returns the distance between &quot;this&quot; and &quot;other&quot;.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;distance_span_span&lt;/li&gt;
     *             &lt;li&gt;distance_span_spanset&lt;/li&gt;
     *             &lt;li&gt;distance_floatspan_float&lt;/li&gt;
     *
     * @param other object to compare with
     * @return A float value
     * @throws Exception
     */
    public Float distance(Object other) throws Exception {
<span class="nc" id="L466">        float answer= 0;</span>
<span class="nc bnc" id="L467" title="All 4 branches missed.">        if ((other instanceof Integer) || (other instanceof Float)){</span>
<span class="nc" id="L468">            answer= (float) functions.distance_span_float(this._inner, (float) other);</span>
        }
<span class="nc bnc" id="L470" title="All 2 branches missed.">        else if ((other instanceof FloatSet)){</span>
<span class="nc" id="L471">            answer= (float) functions.distance_floatset_floatset(this._inner, ((FloatSet) other).get_inner());</span>
        }
<span class="nc bnc" id="L473" title="All 2 branches missed.">        else if ((other instanceof FloatSpanSet)){</span>
<span class="nc" id="L474">            answer= (float) functions.distance_floatspanset_floatspan(this._inner, ((FloatSpanSet) other).get_inner());</span>
        }
<span class="nc bnc" id="L476" title="All 2 branches missed.">        else if ((other instanceof FloatSpan)){</span>
<span class="nc" id="L477">            answer= (float) functions.distance_floatspan_floatspan(this._inner, ((FloatSpan) other)._inner);</span>
        }
        else {
<span class="nc" id="L480">            throw new Exception(&quot;Operation not supported with &quot; + other + &quot; type&quot;);</span>
        }
<span class="nc" id="L482">        return answer;</span>
    }
    /* ------------------------- Set Operations -------------------------------- */

    /**
     * Returns the intersection of &quot;this&quot; and &quot;other&quot;.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;intersection_span_span&lt;/li&gt;
     *             &lt;li&gt;intersection_spanset_span&lt;/li&gt;
     *             &lt;li&gt;intersection_floatset_float&lt;/li&gt;
     *
     * @param other object to intersect with
     * @return A {@link java.lang.Number}. The actual class depends on
     *      *            &quot;other&quot;.
     */
    public FloatSpan intersection(Object other) throws Exception {
<span class="nc" id="L501">        Pointer result = null;</span>
<span class="nc bnc" id="L502" title="All 4 branches missed.">        if ((other instanceof Integer) || (other instanceof Float)){</span>
<span class="nc" id="L503">            result= functions.intersection_span_float(this._inner, (float) other);</span>
        }
<span class="nc bnc" id="L505" title="All 2 branches missed.">        else if (other instanceof FloatSpan){</span>
<span class="nc" id="L506">            result= functions.intersection_span_span(this._inner, ((FloatSpan) other)._inner);</span>
        }
<span class="nc bnc" id="L508" title="All 2 branches missed.">        else if (other instanceof FloatSpanSet){</span>
<span class="nc" id="L509">            result= functions.intersection_spanset_span(this._inner, ((FloatSpanSet) other).get_inner());</span>
        }
<span class="nc bnc" id="L511" title="All 2 branches missed.">        else if ((other instanceof FloatSet)){</span>
<span class="nc" id="L512">            result= functions.intersection_set_set(this._inner, ((FloatSet) other).get_inner());</span>
        }
        else {
<span class="nc" id="L515">            throw new Exception(&quot;Operation not supported with &quot; + other + &quot; type&quot;);</span>
        }
<span class="nc" id="L517">        return new FloatSpan(result);</span>
    }

    /**
     * Returns the difference of &quot;this&quot; and &quot;other&quot;.
     *
     *  &lt;p&gt;
     *         MEOS Functions:
     *             &lt;li&gt;minus_span_span&lt;/li&gt;
     *             &lt;li&gt;minus_spanset_span&lt;/li&gt;
     *             &lt;li&gt;minus_floatspan_float&lt;/li&gt;
     *
     * @param other object to diff with
     * @return A {@link FloatSpanSet} instance.
     */
    public FloatSpanSet minus(Object other){
<span class="fc" id="L533">        Pointer result = null;</span>
<span class="pc bpc" id="L534" title="2 of 4 branches missed.">        if ((other instanceof Integer) || (other instanceof Float)){</span>
<span class="nc" id="L535">            result = functions.minus_span_float(this._inner, (double)other);</span>
        }
<span class="fc bfc" id="L537" title="All 2 branches covered.">        else if (other instanceof FloatSpan) {</span>
<span class="fc" id="L538">            result = functions.minus_span_span(this._inner,((FloatSpan) other).get_inner());</span>
        }
<span class="fc bfc" id="L540" title="All 2 branches covered.">        else if (other instanceof FloatSpanSet) {</span>
<span class="fc" id="L541">            result = functions.minus_spanset_span(((FloatSpanSet) other).get_inner(), this._inner);</span>
        }
        else {
            //result = super.minus(other);
        }
<span class="fc" id="L546">        return new FloatSpanSet(result);</span>
    }


    /**
     * Returns the union of &quot;this&quot; and &quot;other&quot;.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;union_spanset_span&lt;/li&gt;
     *             &lt;li&gt;union_span_span&lt;/li&gt;
     *             &lt;li&gt;union_floatspan_float&lt;/li&gt;
     *
     * @param other object to merge with
     * @return A {@link FloatSpanSet} instance.
     */
    public FloatSpanSet union(Object other) throws Exception {
<span class="fc" id="L564">        Pointer result = null;</span>
<span class="pc bpc" id="L565" title="2 of 6 branches missed.">        if (other instanceof Integer || other instanceof Double || other instanceof Float){</span>
<span class="fc" id="L566">            result = functions.union_span_float(this._inner, (double) other);</span>
        }
<span class="fc bfc" id="L568" title="All 2 branches covered.">        else if (other instanceof FloatSpan) {</span>
<span class="fc" id="L569">            result = functions.union_span_span(this._inner,((FloatSpan) other).get_inner());</span>
        }
<span class="pc bpc" id="L571" title="1 of 2 branches missed.">        else if (other instanceof FloatSpanSet) {</span>
<span class="fc" id="L572">            result = functions.union_spanset_span(((FloatSpanSet) other).get_inner(), this._inner);</span>
        }
        else {
<span class="nc" id="L575">            throw new Exception(&quot;Operation not supported with this type&quot;);</span>
        }
<span class="fc" id="L577">        return new FloatSpanSet(result);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>