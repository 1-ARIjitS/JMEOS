<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>IntSet.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">jmeos</a> &gt; <a href="index.source.html" class="el_package">types.collections.number</a> &gt; <span class="el_source">IntSet.java</span></div><h1>IntSet.java</h1><pre class="source lang-java linenums">package types.collections.number;
import types.collections.base.Base;
import types.collections.base.Set;
import jnr.ffi.Pointer;

import java.util.ArrayList;
import java.util.List;
import java.util.Objects;
import functions.functions;

/**
 * Class for representing a set of text values.
 * &lt;p&gt;
 *     ``TextSet`` objects can be created with a single argument of type string as
 *     in MobilityDB.
 * &lt;p&gt;
 *         &gt;&gt;&gt; IntSet(string='{1, 3, 56}')
 * &lt;p&gt;
 *     Another possibility is to create a ``TextSet`` object from a list of
 *     strings or integers.
 * &lt;p&gt;
 *         &gt;&gt;&gt; IntSet(elements=[1, '2', 3, '56'])
 * @author ARIJIT SAMAL
 */
public class IntSet extends Set&lt;Integer&gt; implements Number{
    private final Pointer _inner;

    public IntSet(Pointer inner){
<span class="fc" id="L29">        super(inner);</span>
<span class="fc" id="L30">        _inner = inner;</span>
<span class="fc" id="L31">    }</span>

    public IntSet(String str){
<span class="fc" id="L34">        super(str);</span>
<span class="fc" id="L35">        _inner = functions.intset_in(str);</span>
<span class="fc" id="L36">    }</span>

    @Override
    public Pointer createStringInner(String str){
<span class="fc" id="L40">        return functions.intset_in(str);</span>
    }

    @Override
    public Pointer createInner(Pointer inner){
<span class="fc" id="L45">        return inner;</span>
    }

    /* ------------------------- Constructors ---------------------------------- */


    /* ------------------------- Output ---------------------------------------- */

    /**
     * Return the string representation of the content of &quot;this&quot;.
     *
     *  &lt;p&gt;
     *         MEOS Functions:
     *             &lt;li&gt;intset_out&lt;/li&gt;
     *
     *
     * @return A new {@link String} instance
     */
    public String toString(){
<span class="fc" id="L64">        return functions.intset_out(this._inner);</span>
    }

    /* ------------------------- Conversions ----------------------------------- */


    /**
     * Returns a SpanSet that contains a Span for each element in &quot;this&quot;.
     *
     * &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;set_to_spanset&lt;/li&gt;
     *
     * @return A new {@link IntSpanSet} instance
     */
    public IntSpanSet to_spanset(){
<span class="nc" id="L81">        return new IntSpanSet(functions.set_to_spanset(this._inner));</span>
    }


    /**
     * Returns a span that encompasses &quot;this&quot;.
     *
     * &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;set_span&lt;/li&gt;
     *
     * @return A {@link IntSpan} instance
     */
    public IntSpan to_span(){
<span class="nc" id="L96">        return new IntSpan(functions.set_to_span(this._inner));</span>
    }

    public FloatSet to_floatset(){
<span class="nc" id="L100">        List&lt;Float&gt; floatElements = new ArrayList&lt;Float&gt;();</span>
<span class="nc bnc" id="L101" title="All 2 branches missed.">        for (Integer element : this.elements()) {</span>
<span class="nc" id="L102">            floatElements.add(element.floatValue());</span>
<span class="nc" id="L103">        }</span>
<span class="nc" id="L104">        return new FloatSet(String.valueOf(floatElements));</span>
    }


    /** ------------------------- Accessors ------------------------------------- */

    @Override
    public Pointer get_inner(){
<span class="nc" id="L112">        return this._inner;</span>
    }

    /**
     * Returns the first element in &quot;this&quot;.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;intset_start_value&lt;/li&gt;
     *
     * @return A {@link Integer} instance
     */
    public Integer start_element(){
<span class="fc" id="L126">        return functions.intset_start_value(this._inner);</span>
    }


    /**
     * Returns the last element in &quot;this&quot;.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;intset_end_value&lt;/li&gt;
     *
     * @return A {@link Integer} instance
     */
    public Integer end_element(){
<span class="fc" id="L141">        return functions.intset_end_value(this._inner);</span>
    }

    /*
      Returns the &quot;n&quot;-th element in &quot;this&quot;.

       &lt;p&gt;

              MEOS Functions:
                  &lt;li&gt;intset_value_n&lt;/li&gt;

      @param n The 0-based index of the element to return.
     * @return A {@link Integer} instance
     * @throws Exception
     */

    public Integer element_n(int n) throws Exception {
<span class="nc" id="L158">        super.element_n(n);</span>
<span class="nc" id="L159">        return Objects.requireNonNull(functions.intset_value_n(this._inner, n + 1)).getInt(Integer.BYTES);</span>
    }

    public List&lt;Integer&gt; elements(){
<span class="nc" id="L163">        Pointer elems = functions.intset_values(this._inner);</span>
<span class="nc" id="L164">        List&lt;Integer&gt; ret = new ArrayList&lt;Integer&gt;();</span>
<span class="nc bnc" id="L165" title="All 2 branches missed.">        for (int i=0;i&lt;this.num_elements();i++)</span>
        {
<span class="nc" id="L167">            ret.add(elems.getInt((long) i *Integer.BYTES));</span>
        }
<span class="nc" id="L169">        return ret;</span>
    }



    /* ------------------------- Transformations ------------------------------------ */

    /**
     * Returns a new &quot;IntSet&quot; instance with all elements shifted by &quot;delta&quot;.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;intset_shift_scale&lt;/li&gt;
     *
     * @param delta The value to shift by.
     * @return A new {@link IntSet} instance
     */
    public IntSet shift(int delta){
<span class="nc" id="L188">        return this.shift_scale(delta,0);</span>
    }

    /**
     * Returns a new &quot;IntSet&quot; instance with all elements scaled to so that the encompassing
     *         span has width &quot;width&quot;.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;intset_shift_scale&lt;/li&gt;
     *
     * @param width The new width.
     * @return A new {@link IntSet} instance
     */
    public IntSet scale(int width){
<span class="nc" id="L204">        return this.shift_scale(0,width);</span>
    }


    /**
     * Returns a new &quot;IntSet&quot; instance with all elements shifted by
     *         &quot;delta&quot; and scaled to so that the encompassing span has width
     *         &quot;width&quot;.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;intset_shift_scale&lt;/li&gt;
     *
     * @param delta The value to shift by.
     * @param width The new width.
     * @return A new {@link IntSet} instance
     */
    public IntSet shift_scale(int delta, int width){
<span class="nc bnc" id="L223" title="All 4 branches missed.">        return new IntSet(functions.intset_shift_scale(this._inner, delta,width,delta != 0, width != 0));</span>
    }



    /** ------------------------- Topological Operations -------------------------------- */



    public boolean contains(Object other) throws Exception {
<span class="pc bpc" id="L233" title="1 of 4 branches missed.">        if ((other instanceof Integer) || (other instanceof Float)){</span>
<span class="fc" id="L234">            return functions.contains_set_int(this._inner, (int) other);</span>
        }
        else {
<span class="fc" id="L237">            return super.contains((Base) other);</span>
        }
    }








    /* ------------------------- Position Operations -------------------------------- */


    /**
     * Returns whether &quot;this&quot; is strictly to the left of &quot;other&quot;. That is,
     *         &quot;this&quot; ends before &quot;other&quot; starts.
     *
     * &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;left_set_set&lt;/li&gt;
     *             &lt;li&gt;left_intset_int&lt;/li&gt;
     *
     * @param other object to compare with
     * @return True if left, False otherwise
     * @throws Exception
     */
    public boolean is_left(Object other) throws Exception {
<span class="fc bfc" id="L266" title="All 2 branches covered.">        if (other instanceof Integer){</span>
<span class="fc" id="L267">            return functions.left_set_int(this._inner, (int) other);</span>
        }
        else{
<span class="fc" id="L270">            return super.is_left((Base) other);</span>
        }
    }

    /**
     * Returns whether &quot;this&quot; is to the left of &quot;other&quot; allowing overlap.
     *         That is, &quot;this&quot; ends before &quot;other&quot; ends (or at the same value).
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;overleft_set_set&lt;/li&gt;
     *             &lt;li&gt;overleft_intset_int&lt;/li&gt;
     *
     * @param other object to compare with
     * @return True if is over or left, False otherwise
     * @throws Exception
     */
    public boolean is_over_or_left(Object other) throws Exception {
<span class="fc bfc" id="L289" title="All 2 branches covered.">        if (other instanceof Integer){</span>
<span class="fc" id="L290">            return functions.overleft_set_int(this._inner, (int) other);</span>
        }
        else{
<span class="fc" id="L293">            return super.is_over_or_left((Base) other);</span>
        }
    }


    /**
     * Returns whether &quot;this&quot; is strictly to the right of &quot;other&quot;. That is,
     *         &quot;this&quot; ends after &quot;other&quot; starts.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;right_set_set&lt;/li&gt;
     *             &lt;li&gt;right_intset_int&lt;/li&gt;
     *
     * @param other object to compare with
     * @return True if right, False otherwise
     * @throws Exception
     */
    public boolean is_right(Object other) throws Exception {
<span class="fc bfc" id="L313" title="All 2 branches covered.">        if (other instanceof Integer){</span>
<span class="fc" id="L314">            return functions.right_set_int(this._inner, (int) other);</span>
        }
        else{
<span class="fc" id="L317">            return super.is_right((Base) other);</span>
        }
    }


    /**
     * Returns whether &quot;this&quot; is to the right of &quot;other&quot; allowing overlap.
     *         That is, &quot;this&quot; starts before &quot;other&quot; ends (or at the same value).
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;overright_set_set&lt;/li&gt;
     *             &lt;li&gt;overright_intset_int&lt;/li&gt;
     *
     * @param other object to compare with
     * @return True if is over or right, False otherwise
     * @throws Exception
     */
    public boolean is_over_or_right(Object other) throws Exception {
<span class="fc bfc" id="L337" title="All 2 branches covered.">        if (other instanceof Integer){</span>
<span class="fc" id="L338">            return functions.overright_set_int(this._inner, (int) other);</span>
        }
        else{
<span class="fc" id="L341">            return super.is_over_or_right((Base) other);</span>
        }
    }



    /* ------------------------- Set Operations -------------------------------- */

    /**
     * Returns the intersection of &quot;this&quot; and &quot;other&quot;.
     *
     * &lt;p&gt;
     * &lt;p&gt;
     * MEOS Functions:
     * &lt;li&gt;intersection_set_set&lt;/li&gt;
     * &lt;li&gt;intersection_intset_int&lt;/li&gt;
     *
     * @param other A {@link IntSet} or {@link Integer} instance
     * @return An object of the same type as &quot;other&quot; or &quot;None&quot; if the
     * *             intersection is empty.
     * @throws Exception
     */
    public IntSet intersection(Object other) throws Exception{
<span class="fc" id="L364">        Pointer result = null;</span>
<span class="pc bpc" id="L365" title="1 of 2 branches missed.">        if (other instanceof Integer){</span>
<span class="nc" id="L366">            result= functions.intersection_set_int(this._inner, (int) other);</span>
        }
<span class="pc bpc" id="L368" title="1 of 2 branches missed.">        else if(other instanceof IntSet){</span>
<span class="fc" id="L369">            result= functions.intersection_set_set(this._inner, ((IntSet) other)._inner);</span>
        }
        else {
<span class="nc" id="L372">            throw new Exception(&quot;Operation not supported with this type&quot;);</span>
        }
<span class="fc" id="L374">        return new IntSet(result);</span>
    }

    /**
     * Returns the difference of &quot;this&quot; and &quot;other&quot;.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;minus_set_set&lt;/li&gt;
     *             &lt;li&gt;minus_intset_int&lt;/li&gt;
     *
     * @param other A {@link IntSet} or {@link Integer} instance
     * @return A {@link IntSet} instance or &quot;None&quot; if the difference is empty.
     * @throws Exception
     */
    public IntSet minus(Object other) throws Exception {
<span class="fc" id="L391">        Pointer result = null;</span>
<span class="pc bpc" id="L392" title="1 of 2 branches missed.">        if (other instanceof Integer){</span>
<span class="nc" id="L393">            result = functions.minus_set_int(this._inner, (int) other);</span>
        }
<span class="pc bpc" id="L395" title="1 of 2 branches missed.">        else if(other instanceof IntSet){</span>
<span class="fc" id="L396">            result = functions.minus_set_set(this._inner, ((IntSet) other)._inner);</span>
        }

<span class="fc" id="L399">        return new IntSet(result);</span>
    }


    /**
     * Returns the difference of &quot;other&quot; and &quot;this&quot;.
     *
     * &lt;p&gt;
     * &lt;p&gt;
     * MEOS Functions:
     * &lt;li&gt;minus_int_intset&lt;/li&gt;
     *
     * @param other A {@link Integer} instance
     * @return A {@link Integer} instance or &quot;None&quot; if the difference is empty.
     */
    public Pointer subtract_from(int other){
<span class="nc" id="L415">        return functions.minus_int_set(other,this._inner);</span>
    }


    /**
     * Returns the union of &quot;this&quot; and &quot;other&quot;.
     *
     * &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;union_set_set&lt;/li&gt;
     *             &lt;li&gt;union_intset_int&lt;/li&gt;
     *
     * @param other A {@link IntSet} or {@link Integer} instance
     * @return A {@link IntSet} instance.
     * @throws Exception
     */
    public IntSet union(Object other) throws Exception {
<span class="fc" id="L433">        Pointer result = null;</span>
<span class="pc bpc" id="L434" title="1 of 2 branches missed.">        if (other instanceof Integer){</span>
<span class="nc" id="L435">            result = functions.union_set_int(this._inner, (int) other);</span>
        }
<span class="pc bpc" id="L437" title="1 of 2 branches missed.">        else if(other instanceof IntSet){</span>
<span class="fc" id="L438">            result = functions.union_set_set(this._inner, ((IntSet) other)._inner);</span>
        }
<span class="fc" id="L440">        return new IntSet(result);</span>
    }





    /* ------------------------- Distance Operations --------------------------- */


    /**
     * /**
     * Returns the distance between &quot;this&quot; and &quot;other&quot;.
     * &lt;p&gt;
     *
     *      MEOS functions:
     *          &lt;li&gt;distance_intset_int&lt;/li&gt;
     *
     *
     * @param other object to compare with
     * @return A float value
     * @throws Exception
     */
    public float distance(Object other) throws Exception {
<span class="fc" id="L464">        float answer=0;</span>
<span class="fc bfc" id="L465" title="All 2 branches covered.">        if (other instanceof Integer){</span>
<span class="fc" id="L466">            answer= (float) functions.distance_set_int(this._inner, (int) other);</span>
        }
<span class="pc bpc" id="L468" title="1 of 2 branches missed.">        else if(other instanceof IntSet){</span>
<span class="fc" id="L469">            answer= functions.distance_intset_intset(this._inner, ((IntSet) other)._inner);</span>
        }
<span class="nc bnc" id="L471" title="All 2 branches missed.">        else if(other instanceof IntSpan){</span>
<span class="nc" id="L472">            answer= this.to_spanset().distance(other);</span>
        }
<span class="nc bnc" id="L474" title="All 2 branches missed.">        else if(other instanceof IntSpanSet){</span>
<span class="nc" id="L475">            answer= this.to_spanset().distance(other);</span>
        }
        else {
<span class="nc" id="L478">            throw new Exception(&quot;Operation not supported with &quot;+ other + &quot; type&quot;);</span>
        }
<span class="fc" id="L480">        return answer;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>