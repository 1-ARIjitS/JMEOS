<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FloatSpanSet.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">jmeos</a> &gt; <a href="index.source.html" class="el_package">types.collections.number</a> &gt; <span class="el_source">FloatSpanSet.java</span></div><h1>FloatSpanSet.java</h1><pre class="source lang-java linenums">package types.collections.number;
import com.google.common.primitives.Floats;
import jnr.ffi.Pointer;
import types.collections.base.Base;
import types.collections.base.SpanSet;
import functions.functions;
import java.util.ArrayList;
import java.util.List;

/**
 * Class for representing lists of disjoint floatspans.
 * &lt;p&gt;
 *     ``FloatSpanSet`` objects can be created with a single argument of type string
 *     as in MobilityDB.
 * &lt;p&gt;
 *         &gt;&gt;&gt; FloatSpanSet(string='{[8, 10], [11, 1]}')
 * &lt;p&gt;
 *     Another possibility is to give a list specifying the composing
 *     spans, which can be instances  of ``str`` or ``FloatSpan``. The composing
 *     spans must be given in increasing order.
 * &lt;p&gt;
 *         &gt;&gt;&gt; FloatSpanSet(span_list=['[8, 10]', '[11, 12]'])
 *         &gt;&gt;&gt; FloatSpanSet(span_list=[FloatSpan('[8, 10]'), FloatSpan('[11, 12]')])
 *
 * @author ARIJIT SAMAL
 */
public class FloatSpanSet extends SpanSet&lt;Float&gt; implements Number{

    private final Pointer _inner;

    /** ------------------------- Constructors ---------------------------------- */

    public FloatSpanSet(Pointer inner){
<span class="fc" id="L34">        super(inner);</span>
<span class="fc" id="L35">        _inner = inner;</span>
<span class="fc" id="L36">    }</span>

    public FloatSpanSet(String str){
<span class="fc" id="L39">        super(str);</span>
<span class="fc" id="L40">        _inner = functions.floatspanset_in(str);</span>
<span class="fc" id="L41">    }</span>

    @Override
    public Pointer createStringInner(String str){
<span class="fc" id="L45">        return functions.floatspanset_in(str);</span>
    }

    @Override
    public Pointer createInner(Pointer inner){
<span class="fc" id="L50">        return inner;</span>
    }


//    @Override
//    public Pointer createListInner(List&lt;tstzspan&gt; periods){
//        return null;
//    }

    /* ------------------------- Output ---------------------------------------- */


    /**
     * Return the string representation of the content of &quot;this&quot;.
     *
     *  &lt;p&gt;
     *         MEOS Functions:
     *             &lt;li&gt;floatspanset_out&lt;/li&gt;
     *
     *
     * @param max_decimals number of maximum decimals
     * @return A new {@link String} instance
     */
    public String toString(int max_decimals){
<span class="fc" id="L74">        return functions.floatspanset_out(this._inner, max_decimals);</span>
    }


    /* ------------------------- Conversions ----------------------------------- */


    /**
     * Returns a span that encompasses &quot;this&quot;.
     *
     * &lt;p&gt;
     * &lt;p&gt;
     * MEOS Functions:
     * &lt;li&gt;spanset_span&lt;/li&gt;
     *
     * @return A new {@link FloatSpan} instance
     */
    public FloatSpan to_span(){
<span class="fc" id="L92">        return new FloatSpan(functions.spanset_span(this._inner));</span>
    }


    /**
     * Returns an intspanset that encompasses &quot;this&quot;.
     *
     * &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;floatspanset_intspanset&lt;/li&gt;
     *
     * @return A new {@link IntSpanSet} instance
     */
    public IntSpanSet to_intspanset(){
<span class="fc" id="L107">        return new IntSpanSet(functions.floatspanset_to_intspanset( this._inner));</span>
    }



    /** ------------------------- Accessors ------------------------------------- */


    public Pointer get_inner(){
<span class="fc" id="L116">        return _inner;</span>
    }

    /**
     * Returns the width of the spanset. By default, i.e., when the second
     *         argument is False, the function takes into account the gaps within,
     *         i.e., returns the sum of the widths of the spans within.
     *         Otherwise, the function returns the width of the spanset ignoring
     *         any gap, i.e., the width from the lower bound of the first span to
     *         the upper bound of the last span.
     * &lt;p&gt;
     *         MEOS Functions:
     *             &lt;li&gt;spanset_width&lt;/li&gt;
     *
     * @param ignore_gaps Whether to take into account potential gaps in
     *      *             the spanset.
     * @return A `float` representing the duration of the spanset
     */
    public float width(boolean ignore_gaps){
<span class="fc" id="L135">        return (float) functions.floatspanset_width(this._inner, ignore_gaps);</span>
    }

    /*
      Returns the first span in &quot;this&quot;.
      &lt;p&gt;
              MEOS Functions:
                  &lt;li&gt;spanset_start_span&lt;/li&gt;

      @return A {@link FloatSpan} instance
     */

    public FloatSpan start_span(){
<span class="fc" id="L148">        return new FloatSpan(functions.spanset_start_span(this._inner));</span>
    }

    /*
      Returns the last span in &quot;this&quot;.
      &lt;p&gt;
              MEOS Functions:
                  &lt;li&gt;spanset_end_span&lt;/li&gt;

      @return A {@link FloatSpan} instance
     */
    public FloatSpan end_span(){
<span class="fc" id="L160">        return new FloatSpan(functions.spanset_end_span(this._inner));</span>
    }

    /*
      Returns the n-th span in &quot;this&quot;.
      &lt;p&gt;
              MEOS Functions:
                  &lt;li&gt;spanset_span_n&lt;/li&gt;

      @return A {@link FloatSpan} instance
     */
    public FloatSpan span_n(int n){
<span class="fc" id="L172">        return new FloatSpan(functions.spanset_span_n(this._inner, n));</span>
    }


    public List&lt;FloatSpan&gt; spans(){
<span class="fc" id="L177">        Pointer ps = functions.spanset_spans(this._inner);</span>
<span class="fc" id="L178">        List&lt;FloatSpan&gt; spanList = new ArrayList&lt;FloatSpan&gt;(this.num_spans());</span>
<span class="fc" id="L179">        System.out.println(this.num_spans());</span>
<span class="fc" id="L180">        long pointerSize= Double.BYTES;</span>
<span class="fc bfc" id="L181" title="All 2 branches covered.">        for (long i=0; i&lt;this.num_spans(); i++){</span>
<span class="fc" id="L182">            Pointer p= ps.getPointer((long) i*pointerSize);</span>
//            System.out.println(new IntSpan(p).lower().toString());
//            System.out.println(new IntSpan(p).upper().toString());
<span class="fc" id="L185">            spanList.add(new FloatSpan(p));</span>
        }
<span class="fc" id="L187">        return spanList;</span>
    }

    /* ------------------------- Transformations ------------------------------- */


    /**
     * Return a new &quot;FloatSpanSet&quot; with the lower and upper bounds shifted by
     *         &quot;delta&quot;.
     *
     *  &lt;p&gt;
     *         MEOS Functions:
     *             &lt;li&gt;floatspanset_shift_scale&lt;/li&gt;
     *
     *
     * @param delta The value to shift by
     * @return A new {@link FloatSpanSet} instance
     */
    public FloatSpanSet shift(int delta){
<span class="fc" id="L206">        return this.shift_scale(delta,0);</span>
    }



    /**
     * Return a new &quot;FloatSpanSet&quot; with the lower and upper bounds scaled so
     *         that the width is &quot;width&quot;.
     *
     *  &lt;p&gt;
     *         MEOS Functions:
     *             &lt;li&gt;floatspanset_shift_scale&lt;/li&gt;
     *
     * @param width The new width
     * @return a new {@link FloatSpanSet} instance
     */

    public FloatSpanSet scale(int width){
<span class="fc" id="L224">        return this.shift_scale(0,width);</span>
    }


    /**
     * Return a new &quot;FloatSpanSet&quot; with the lower and upper bounds shifted by
     *         &quot;delta&quot; and scaled so that the width is &quot;width&quot;.
     *
     *  &lt;p&gt;
     *         MEOS Functions:
     *             &lt;li&gt;floatspanset_shift_scale&lt;/li&gt;
     *
     * @param delta The value to shift by
     * @param width v
     * @return a new {@link FloatSpanSet} instance
     */
    public FloatSpanSet shift_scale(int delta, int width){
<span class="fc bfc" id="L241" title="All 4 branches covered.">        return new FloatSpanSet(functions.floatspanset_shift_scale(this._inner,delta,width,delta != 0, width != 0));</span>
    }




    /* ------------------------- Topological Operations -------------------------------- */


    /**
     * Returns whether &quot;this&quot; is adjacent to &quot;other&quot;. That is, they share
     *         a bound but only one of them contains it.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;adjacent_spanset_span&lt;/li&gt;
     *             &lt;li&gt;adjacent_spanset_spanset&lt;/li&gt;
     *             &lt;li&gt;adjacent_floatspanset_float&lt;/li&gt;
     *
     * @param other object to compare with
     * @return True if adjacent, False otherwise
     * @throws Exception
     */
    public boolean is_adjacent(Object other) throws Exception {
<span class="fc" id="L266">        boolean answer = false;</span>
<span class="pc bpc" id="L267" title="1 of 2 branches missed.">        if (other instanceof Float){</span>
<span class="fc" id="L268">            answer = functions.adjacent_spanset_float(this._inner, (float) other);</span>
        }
        else{
<span class="nc" id="L271">            answer = super.is_adjacent((Base)other);</span>
        }
<span class="fc" id="L273">        return answer;</span>
    }

    /**
     * Returns whether &quot;this&quot; contains &quot;content&quot;.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;contains_spanset_span&lt;/li&gt;
     *             &lt;li&gt;contains_spanset_spanset&lt;/li&gt;
     *             &lt;li&gt;contains_floatspanset_float&lt;/li&gt;
     *
     * @param other object to compare with
     * @return True if contains, False otherwise
     * @throws Exception
     */
    public boolean contains(Object other) throws Exception {
<span class="pc bpc" id="L291" title="1 of 2 branches missed.">        if (other instanceof Float){</span>
<span class="fc" id="L292">            return functions.contains_spanset_float(this._inner, (float) other);</span>
        }
        else{
<span class="nc" id="L295">            return super.contains((Base)other);</span>
        }
    }


    /**
     * Returns whether &quot;this&quot; and the bounding period of &quot;other&quot; is the
     *         same.
     *
     * &lt;p&gt;
     *         MEOS Functions:
     *             &lt;li&gt;same_period_temporal&lt;/li&gt;
     *
     * @param other object to compare with
     * @return True if equal, False otherwise
     * @throws Exception
     */
    public boolean is_same(Object other) throws Exception {
<span class="pc bpc" id="L313" title="1 of 2 branches missed.">        if (other instanceof Float){</span>
<span class="fc" id="L314">            return functions.spanset_eq(this._inner,functions.float_to_spanset((float) other));</span>
        }
        else{
<span class="nc" id="L317">            return super.is_same((Base)other);</span>
        }
    }



    /* ------------------------- Position Operations --------------------------- */

    /**
     * Returns whether &quot;this&quot; is strictly left of &quot;other&quot;. That is,
     *         &quot;this&quot; ends before &quot;other&quot; starts.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;left_span_span&lt;/li&gt;
     *             &lt;li&gt;left_span_spanset&lt;/li&gt;
     *             &lt;li&gt;left_floatspan_float&lt;/li&gt;
     *
     * @param other object to compare with
     * @return True if left, False otherwise
     * @throws Exception
     */
    public boolean is_left(Object other) throws Exception {
<span class="fc" id="L341">        boolean answer = false;</span>
<span class="pc bpc" id="L342" title="1 of 2 branches missed.">        if (other instanceof Float){</span>
<span class="fc" id="L343">            answer = functions.left_spanset_float(this._inner,(float) other);</span>
        }
        else{
<span class="nc" id="L346">            answer = super.is_left((Base)other);</span>
        }
<span class="fc" id="L348">        return answer;</span>
    }


    /**
     * Returns whether &quot;this&quot; is left &quot;other&quot; allowing overlap. That is,
     *         &quot;this&quot; ends before &quot;other&quot; ends (or at the same value).
     *
     * &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;overleft_span_span&lt;/li&gt;
     *             &lt;li&gt;overleft_span_spanset&lt;/li&gt;
     *             &lt;li&gt;overleft_floatspan_float&lt;/li&gt;
     *
     * @param other object to compare with
     * @return True if before, False otherwise
     * @throws Exception
     */
    public boolean is_over_or_left(Object other) throws Exception {
<span class="fc" id="L368">        boolean answer = false;</span>
<span class="pc bpc" id="L369" title="1 of 2 branches missed.">        if (other instanceof Float){</span>
<span class="fc" id="L370">            answer = functions.overleft_spanset_float(this._inner,(float) other);</span>
        }
        else{
<span class="nc" id="L373">            answer = super.is_over_or_left((Base)other);</span>
        }
<span class="fc" id="L375">        return answer;</span>
    }


    /**
     * Returns whether &quot;this&quot; is strictly right &quot;other&quot;. That is, &quot;this&quot;
     *         starts after &quot;other&quot; ends.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;right_span_span&lt;/li&gt;
     *             &lt;li&gt;right_span_spanset&lt;/li&gt;
     *             &lt;li&gt;right_floatspan_float&lt;/li&gt;
     *
     * @param other object to compare with
     * @return True if right, False otherwise
     * @throws Exception
     */
    public boolean is_right(Object other) throws Exception {
<span class="fc" id="L395">        boolean answer = false;</span>
<span class="pc bpc" id="L396" title="1 of 2 branches missed.">        if (other instanceof Float){</span>
<span class="fc" id="L397">            answer = functions.right_spanset_float(this._inner,(float) other);</span>
        }
        else{
<span class="nc" id="L400">            answer = super.is_right((Base)other);</span>
        }
<span class="fc" id="L402">        return answer;</span>
    }



    /**
     *  Returns whether &quot;this&quot; is right &quot;other&quot; allowing overlap. That is,
     *         &quot;this&quot; starts after &quot;other&quot; starts (or at the same value).
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;overright_spanset_span&lt;/li&gt;
     *             &lt;li&gt;overright_spanset_spanset&lt;/li&gt;
     *             &lt;li&gt;overright_floatspanset_float&lt;/li&gt;
     *
     * @param other object to compare with
     * @return True if overlapping or after, False otherwise
     * @throws Exception
     */
    public boolean is_over_or_right(Object other) throws Exception {
<span class="fc" id="L423">        boolean answer = false;</span>
<span class="pc bpc" id="L424" title="1 of 2 branches missed.">        if (other instanceof Float){</span>
<span class="fc" id="L425">            answer = functions.overright_spanset_float(this._inner,(float) other);</span>
        }
        else{
<span class="nc" id="L428">            answer = super.is_over_or_right((Base)other);</span>
        }
<span class="fc" id="L430">        return answer;</span>
    }



    /* ------------------------- Distance Operations --------------------------- */

    /**
     * Returns the distance between &quot;this&quot; and &quot;other&quot;.
     *
     *   &lt;p&gt;
     *         MEOS Functions:
     *             &lt;li&gt;distance_spanset_span&lt;/li&gt;
     *             &lt;li&gt;distance_spanset_spanset&lt;/li&gt;
     *             &lt;li&gt;distance_floatspanset_float&lt;/li&gt;
     *
     * @param other object to compare with
     * @return A float value
     * @throws Exception
     */
    public float distance(Object other) throws Exception {
<span class="nc" id="L451">        float answer = 0;</span>
<span class="nc bnc" id="L452" title="All 2 branches missed.">        if (other instanceof Float) {</span>
<span class="nc" id="L453">            answer = (float) functions.distance_spanset_float(this._inner, (int) other);</span>
<span class="nc bnc" id="L454" title="All 2 branches missed.">        } else if (other instanceof FloatSet) {</span>
<span class="nc" id="L455">            FloatSpan fs = ((FloatSet) other).to_span(FloatSpan.class);</span>
<span class="nc" id="L456">            answer = (float) functions.distance_intspanset_intspan(this._inner, (fs).get_inner());</span>
<span class="nc bnc" id="L457" title="All 2 branches missed.">        } else if (other instanceof FloatSpan) {</span>
<span class="nc" id="L458">            answer = (float) functions.distance_intspanset_intspan(this._inner, ((FloatSpan) other).get_inner());</span>
<span class="nc bnc" id="L459" title="All 2 branches missed.">        } else if (other instanceof FloatSpanSet) {</span>
<span class="nc" id="L460">            answer = (float) functions.distance_intspanset_intspanset(this._inner, ((FloatSpanSet) other).get_inner());</span>
        } else {
<span class="nc" id="L462">            throw new Exception(&quot;Operation not supported with &quot; + other + &quot; type&quot;);</span>
        }
<span class="nc" id="L464">        return answer;</span>
    }


    /* ------------------------- Set Operations -------------------------------- */

    /**
     * Returns the intersection of &quot;this&quot; and &quot;other&quot;.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;intersection_floatspanset_float&lt;/li&gt;
     *
     * @param other object to intersect with
     * @return An boolean value
     * @throws Exception
     */
    public FloatSpanSet intersection(Object other) throws Exception {
<span class="fc" id="L483">        Pointer result = null;</span>
<span class="pc bpc" id="L484" title="1 of 4 branches missed.">        if ((other instanceof Float) || (other instanceof Integer)){</span>
<span class="fc" id="L485">            result= functions.intersection_spanset_float(this._inner, (float) other);</span>
        }
        else{
<span class="fc" id="L488">            FloatSpanSet tmp= (FloatSpanSet) super.intersection((Base) other);</span>
<span class="fc" id="L489">            result= tmp.get_inner();</span>
        }
<span class="fc" id="L491">        return new FloatSpanSet(result);</span>
    }

    public FloatSpanSet mul(int other) throws Exception {
<span class="nc" id="L495">        return this.intersection(other);</span>
    }

    /**
     * Returns the difference of &quot;this&quot; and &quot;other&quot;.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;minus_spanset_span&lt;/li&gt;
     *             &lt;li&gt;minus_spanset_spanset&lt;/li&gt;
     *             &lt;li&gt;minus_floatspanset_float&lt;/li&gt;
     *
     * @param other object to diff with
     * @return  A {@link FloatSpanSet} instance.
     * @throws Exception
     */
    public FloatSpanSet minus(Object other) throws Exception {
<span class="fc" id="L513">        Pointer result = null;</span>
<span class="pc bpc" id="L514" title="1 of 4 branches missed.">        if ((other instanceof Integer) || (other instanceof Float)){</span>
<span class="fc" id="L515">            result = functions.minus_spanset_float(this._inner, (float) other);</span>
        }
        else{
<span class="fc" id="L518">            FloatSpanSet tmp = (FloatSpanSet) super.minus((Base) other);</span>
<span class="fc" id="L519">            result = tmp.get_inner();</span>
        }
<span class="fc" id="L521">        return new FloatSpanSet(result);</span>
    }

    public FloatSpanSet sub(int other) throws Exception {
<span class="nc" id="L525">        return this.minus(other);</span>
    }


    /**
     * Returns the union of &quot;this&quot; and &quot;other&quot;.
     *
     *  &lt;p&gt;
     *
     *         MEOS Functions:
     *             &lt;li&gt;union_floatspanset_float&lt;/li&gt;
     *             &lt;li&gt;union_spanset_spanset&lt;/li&gt;
     *             &lt;li&gt;union_spanset_span&lt;/li&gt;
     *
     * @param other object to merge with
     * @return A {@link FloatSpanSet} instance.
     */
    public FloatSpanSet union(Object other) throws Exception {
<span class="fc" id="L543">        Pointer result = null;</span>
<span class="pc bpc" id="L544" title="1 of 4 branches missed.">        if ((other instanceof Integer) || (other instanceof Float)) {</span>
<span class="fc" id="L545">            result = functions.union_spanset_float(this._inner, (float) other);</span>
        } else {
<span class="fc" id="L547">            FloatSpanSet tmp = (FloatSpanSet) super.union((Base) other);</span>
<span class="fc" id="L548">            result = tmp.get_inner();</span>
        }
<span class="fc" id="L550">        return new FloatSpanSet(result);</span>
    }

    public FloatSpanSet add(int other) throws Exception {
<span class="nc" id="L554">        return this.union(other);</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>